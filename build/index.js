document.addEventListener("DOMContentLoaded",(function(){jQuery((function(a){var e=a("#add-rating-btn").data("product-id");console.log("one2five_vars  ",one2five_vars),a("#productId").val(e);var i=one2five_vars.nonce,n=one2five_vars.primary_color,l=one2five_vars.accent_color,t=one2five_vars.font_color,s=one2five_vars.button_text_case,o=one2five_vars.is_product_page,r=one2five_vars.translations,d=`\n        <style>\n            .design-line:hover::before,\n            .design-line.active::before,\n            .functionality-line:hover::before,\n            .functionality-line.active::before,\n            .quality-line:hover::before,\n            .quality-line.active::before {\n                background-color: ${l} !important; \n            }\n            .star label.active,\n            .star label:hover {\n                color: ${l} !important; \n            }\n        </style>\n    `;a("head").append(d);var c=`<div class="one2five-bootstrap">\n    <div class="offcanvas offcanvas-end modal-content" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel" style="background-color:#fff;">\n        <div class="offcanvas-header">\n            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>\n        </div>\n        <div class="offcanvas-body">\n            <div class="container">\n                <div class="row">\n                    <form action="" id="myreviewform" method="post">\n                        <div class="col-12">\n                            <h2 id="offcanvasheading" class="fw-normal">${r.welcome?.label||"Welcome"}</h2>\n                            <p>${r.welcome?.description||"We are glad you are here!"}</p>\n                            <p>${r.write_review?.label||"Write a Review"}</p>\n\n                            <label for="">${r.your_rating?.label||"Your Rating"} <span class="required">*</span></label>\n                            <div class="star mb-4">\n                                <input type="radio" id="star1" name="rating" value="1" class="star-radio visually-hidden" required><label for="star1" class="bi-star-fill" data-ratings="1"></label>\n                                <input type="radio" id="star2" name="rating" value="2" class="star-radio visually-hidden" required><label for="star2" class="bi-star-fill" data-ratings="2"></label>\n                                <input type="radio" id="star3" name="rating" value="3" class="star-radio visually-hidden" required><label for="star3" class="bi-star-fill" data-ratings="3"></label>\n                                <input type="radio" id="star4" name="rating" value="4" class="star-radio visually-hidden" required><label for="star4" class="bi-star-fill" data-ratings="4"></label>\n                                <input type="radio" id="star5" name="rating" value="5" class="star-radio visually-hidden" required><label for="star5" class="bi-star-fill" data-ratings="5"></label>\n                            </div>\n\n                            <label for="">${r.design?.label||"Design"} <span class="required">*</span></label>\n                            <p class="mb-2">${r.design?.description||"How would you rate the design?"}</p>\n                            <div class="design-rating mb-4">\n                                <input type="radio" id="design1" name="designRating" value="1" class="design-radio visually-hidden" required><label for="design1" class="design-line" data-ratings="1"></label>\n                                <input type="radio" id="design2" name="designRating" value="2" class="design-radio visually-hidden" required><label for="design2" class="design-line" data-ratings="2"></label>\n                                <input type="radio" id="design3" name="designRating" value="3" class="design-radio visually-hidden" required><label for="design3" class="design-line" data-ratings="3"></label>\n                                <input type="radio" id="design4" name="designRating" value="4" class="design-radio visually-hidden" required><label for="design4" class="design-line" data-ratings="4"></label>\n                                <input type="radio" id="design5" name="designRating" value="5" class="design-radio visually-hidden" required><label for="design5" class="design-line" data-ratings="5"></label>\n                            </div>\n\n                            <label for="">${r.functionality?.label||"Functionality"} <span class="required">*</span></label>\n                            <p class="mb-2">${r.functionality?.description||"How would you rate the functionality?"}</p>\n                            <div class="functionality-rating mb-4">\n                                <input type="radio" id="functionality1" name="functionalityRating" value="1" class="functionality-radio visually-hidden" required><label for="functionality1" class="functionality-line" data-ratings="1"></label>\n                                <input type="radio" id="functionality2" name="functionalityRating" value="2" class="functionality-radio visually-hidden" required><label for="functionality2" class="functionality-line" data-ratings="2"></label>\n                                <input type="radio" id="functionality3" name="functionalityRating" value="3" class="functionality-radio visually-hidden" required><label for="functionality3" class="functionality-line" data-ratings="3"></label>\n                                <input type="radio" id="functionality4" name="functionalityRating" value="4" class="functionality-radio visually-hidden" required><label for="functionality4" class="functionality-line" data-ratings="4"></label>\n                                <input type="radio" id="functionality5" name="functionalityRating" value="5" class="functionality-radio visually-hidden" required><label for="functionality5" class="functionality-line" data-ratings="5"></label>\n                            </div>\n\n                            <label for="">${r.quality?.label||"Quality"} <span class="required">*</span></label>\n                            <p class="mb-2">${r.quality?.description||"How would you rate the quality?"}</p>\n                            <div class="quality-rating mb-4">\n                                <input type="radio" id="quality1" name="qualityRating" value="1" class="quality-radio visually-hidden" required><label for="quality1" class="quality-line" data-ratings="1"></label>\n                                <input type="radio" id="quality2" name="qualityRating" value="2" class="quality-radio visually-hidden" required><label for="quality2" class="quality-line" data-ratings="2"></label>\n                                <input type="radio" id="quality3" name="qualityRating" value="3" class="quality-radio visually-hidden" required><label for="quality3" class="quality-line" data-ratings="3"></label>\n                                <input type="radio" id="quality4" name="qualityRating" value="4" class="quality-radio visually-hidden" required><label for="quality4" class="quality-line" data-ratings="4"></label>\n                                <input type="radio" id="quality5" name="qualityRating" value="5" class="quality-radio visually-hidden" required><label for="quality5" class="quality-line" data-ratings="5"></label>\n                            </div>\n\n                            <label for="">${r.your_nickname?.label||"Your Nickname"} <span class="required">*</span></label>\n                            <input type="text" class="form-control mb-3" id="name" name="name" placeholder="${r.your_nickname?.label||"Your Nickname"}" required>\n\n                            <label for="">${r.your_email?.label||"Your Email"} <span class="required">*</span></label>\n                            <input type="email" class="form-control mb-3" id="email" name="email" placeholder="${r.your_email?.label||"Your Email"}" required>\n\n                            <label for="">${r.review_title?.label||"Review Title"} <span class="required">*</span></label>\n                            <input type="text" class="form-control mb-3" id="title" name="title" placeholder="${r.review_title?.label||"Review Title"}" required>\n\n                            <label for="">${r.write_your_review?.label||"Write Your Review"} <span class="required">*</span></label>\n                            <textarea class="form-control mb-3" id="opinion" name="opinion" rows="4" placeholder="${r.write_your_review?.label||"Write Your Review"}" required></textarea>\n\n                            <label for="" class="form-label">Would you recommend this product? <span class="required">*</span></label>\n                                    <div class="form-check form-check-inline">\n                                        <input class="form-check-input" type="radio" name="isRecommended" id="inlineRadio1" value="Yes" required>\n                                        <p>Yes</p>\n                                    </div>\n                                    <div class="form-check form-check-inline">\n                                        <input class="form-check-input" type="radio" name="isRecommended" id="inlineRadio2" value="No" required>\n                                        <p>No</p>\n                                    </div>\n <div class="form-check mb-3">\n                                <input type="checkbox" class="form-check-input" id="termsAgreement" name="termsAgreement" value="isAgree" required>\n                                <label class="form-check-label" for="terms">${r.terms_conditions?.label||"I agree to the terms and conditions"}</label>\n                            </div>\n <input type="hidden" id="productId" name="productId" value="${e}">\n                                    <input type="hidden" id="nonce" name="nonce" value="${i}">\n                                    <input type="hidden" id="action" name="action" value="submit_review">\n<div id="thankyou"></div>\n                                    <button type="submit" class="btn d-block mx-auto w-100 mb-4 border-0 rounded-0" style="background-color: ${n} !important; text-transform: ${s};  color: ${t} !important;">Submit your review</button>\n                                </div>\n                           \n                            <a href="${r.link?.description||"https://chatgpt.com/c/1ff17a8d-c12a-45c6-8c12-6afa8be6ba32"}">${r.term_conditions?.label||"Terms & Conditions"}</a>\n                            <div class="review-summary">\n                                <p>${r.useful_reviews?.label||"Useful Reviews"}</p>\n                                <p>${r.unsynced_products?.label||"Unsynced Products"}</p>\n                                <p>${r.synced_products?.label||"Synced Products"}</p>\n                            </div>\n                            \n                           \n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>`,u=`<div class="one2five-bootstrap">\n    <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">\n        <div class="modal-dialog modal-dialog-centered">\n            <div class="modal-content">\n                <div class="modal-body">\n                    <h5 class="modal-title" id="successModalLabel">${r.success?.label||"Thank you!"}</h5>\n                    <p>${r.success?.description||"Your review has been submitted successfully!"}</p>\n                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>`;o&&(document.body.insertAdjacentHTML("beforeend",c),document.body.insertAdjacentHTML("beforeend",u),document.addEventListener("click",(function(a){a.target.matches(".add-rating-btn")&&(document.getElementById("offcanvasRight").classList.add("show"),document.getElementById("offcanvasRight").classList.remove("hide"))})),document.addEventListener("click",(function(a){if(a.target.matches(".btn-close")){var e=document.getElementById("offcanvasRight");e.classList.remove("show"),e.classList.add("hide")}})),a(".star-radio").on("change",(function(){a(".star label").removeClass("active"),a(this).prevAll("input.star-radio").addBack().next("label").addClass("active"),a("#ratings").val(a(this).data("ratings"))})),a(".design-radio, .functionality-radio, .quality-radio").on("change",(function(){var e=a(this).val();a(this).siblings("label").removeClass("active").slice(0,e).addClass("active"),a("#"+a(this).attr("name")).val(e)})),a(".review-text").on("click",(function(e){e.preventDefault(),a("html, body").animate({scrollTop:a(".woocommerce-tabs ul").offset().top-32},2e3),a(".woocommerce-tabs ul li").each((function(){a(this).hasClass("active")&&a(this).removeClass("active")})),a(".woocommerce-tabs ul li a").each((function(){a(this).hasClass("active")&&a(this).removeClass("active")})),a(".woocommerce-tabs li#tab-title-reviews_tab a").addClass("active"),a(".woocommerce-tabs li#tab-title-reviews_tab").addClass("active"),a(".woocommerce-Tabs-panel").css("display","none"),a("#tab-reviews_tab").css("display","block")})),a("#myreviewform").on("submit",(function(e){e.preventDefault();var i=a(this).find('button[type="submit"]');i.html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>'),i.prop("disabled",!0);var n=!0,l=a("#email").val();if(l&&!function(a){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)}(l)?(n=!1,a("#email").addClass("is-invalid").siblings(".invalid-feedback").text("Please enter a valid email address."),a("#email").focus()):a("#email").removeClass("is-invalid").siblings(".invalid-feedback").text(""),a("#opinion").val().length<50)return n=!1,a("#opinionLengthMessage").html("Please enter at least 50 characters."),a("#opinion").addClass("is-invalid"),a("#opinion").focus(),i.html("Submit your review"),void i.prop("disabled",!1);if(a("#opinionLengthMessage").html(""),a("#opinion").removeClass("is-invalid"),!n)return i.html("Confirm your review"),void i.prop("disabled",!1);var t=a(this).serializeArray();a.ajax({type:"POST",url:one2five_vars.ajax_url,data:t,success:function(e){if(1==e.success)a("#thankyou").text("Thank you for your review!"),(i=document.getElementById("offcanvasRight")).classList.remove("show"),i.classList.add("hide"),a("#successModal").modal("show"),setTimeout((function(){window.location.reload()}),5e3);else{var i;(i=document.getElementById("offcanvasRight")).classList.remove("show"),i.classList.add("hide");var n=`\n                                    <div class="modal-header">\n                                        <h5 class="modal-title" id="errorModalLabel">⚠️ Oops!</h5>\n                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n                                    </div>\n                                    <div class="modal-body">\n                                        <p> you have already submitted a review for this product</p>\n                                        <p>${e.data}</p> \x3c!-- Append response data to modal body --\x3e\n                                    </div>\n                                    <div class="modal-footer">\n                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>\n                                    </div>\n                                    `;a("#successModal .modal-content").html(n),a("#successModal").modal("show"),setTimeout((function(){window.location.reload()}),5e3)}},error:function(e,i,n){console.error(e.responseText),console.log(n),a("#thankyou").text("An error occurred. Please try again later.")},complete:function(){i.html("Submit your review"),i.prop("disabled",!1)}})})))}))})),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".sync-product-btn").forEach((function(a){a.addEventListener("click",(function(e){e.preventDefault();var i={action:"sync_product_ajax",product_id:a.dataset.productId,nonce:one2five_vars.nonce};a.innerHTML='<i class="fas fa-sync fa-spin"></i>',jQuery.ajax({type:"POST",url:one2five_vars.ajax_url,data:i,success:function(e){console.log("AJAX Response:",e),"0"!==e?(console.log("Product synced successfully!"),alert("Product synced successfully!")):(console.log("Error syncing product."),alert("Failed to sync product.")),a.disabled=!0,a.classList.add("disabled"),window.location.reload(!0)},error:function(a,e,i){console.error("AJAX Error:",a.responseText),console.error("AJAX Error:",i),alert("An error occurred while syncing product."),window.location.reload(!0)},complete:function(){a.innerHTML='<i class="fas fa-sync"></i>'}})}))}))}));